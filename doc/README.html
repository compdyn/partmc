<html>
<head><title>PartMC 1.2.0</title></head>
<body bgcolor="#ffffff">
<h1>PartMC</h1>

<p>PartMC: Particle-resolved Monte Carlo code for atmospheric aerosol simulation</p>

<p>Version 1.2.0 <br />
Released 2009-06-14</p>

<p><a href="http://lagrange.mechse.illinois.edu/mwest/partmc/">http://lagrange.mechse.illinois.edu/mwest/partmc/</a></p>

<p>Reference: N. Riemer, M. West, R. A. Zaveri, and R. C. Easter (2009),
Simulating the evolution of soot mixing state with a particle-resolved
aerosol model, J. Geophys. Res., 114, D09202,
<a href="http://dx.doi.org/10.1029/2008JD011073">http://dx.doi.org/10.1029/2008JD011073</a>.</p>

<p>Copyright (C) 2005-2009 Nicole Riemer and Matthew West <br />
Portions copyright (C) Andreas Bott and Richard Easter <br />
Licensed under the GNU General Public License version 2 or (at your
option) any later version. <br />
For details see the file COPYING or
<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">http://www.gnu.org/licenses/old-licenses/gpl-2.0.html</a>.</p>

<h1>Dependencies</h1>

<p>Required dependencies:</p>

<ul>
<li>Fortran 90 compiler</li>
<li>cmake version 2.6 or higher - <a href="http://www.cmake.org/">http://www.cmake.org/</a></li>
<li>NetCDF - <a href="http://www.unidata.ucar.edu/software/netcdf/">http://www.unidata.ucar.edu/software/netcdf/</a></li>
</ul>

<p>Optional dependencies:</p>

<ul>
<li>MOSAIC - Available from Rahul Zaveri - <a href="&#109;a&#x69;&#108;&#x74;&#111;&#x3a;&#x52;&#x61;&#104;ul.&#x5a;&#x61;&#x76;&#101;&#114;&#105;&#x40;&#x70;&#110;&#108;&#46;&#x67;&#111;&#x76;">&#x52;&#x61;&#104;ul.&#x5a;&#x61;&#x76;&#101;&#114;&#105;&#x40;&#x70;&#110;&#108;&#46;&#x67;&#111;&#x76;</a></li>
<li>gnuplot - <a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a></li>
</ul>

<p>PartMC can be compiled out-of-the-box on Linux under the latest
releases (as of the time of writing) of Fedora, Ubuntu, or openSUSE if
the following packages are installed:</p>

<ul>
<li>Fedora 11: <code>gcc-gfortran</code>, <code>cmake</code>, <code>netcdf-devel</code>, <code>gnuplot</code></li>
<li>Ubuntu 9.04: <code>gfortran</code>, <code>cmake</code>, <code>libnetcdf-dev</code>, <code>gnuplot</code></li>
<li>openSUSE 11.1: <code>gcc-fortran</code>, <code>cmake</code>, <code>libnetcdf-devel</code>, <code>gnuplot</code></li>
</ul>

<p>PartMC will also compile out-of-the-box on OS X 10.5 using Fink (see
<a href="http://www.finkproject.org/">http://www.finkproject.org/</a>) if the following packages are
installed: <code>gcc44</code>, <code>cmake</code>, <code>netcdf</code>, <code>netcdf-gfortran</code>, <code>gnuplot</code>.</p>

<h1>Installation</h1>

<p>In principle PartMC should compile under any modern OS. Testing has
mainly been under Linux and OS X. The quick-start instructions are:</p>

<ol>
<li><p>Install cmake and NetCDF (see above). The NetCDF libraries are
required to compile PartMC. The <code>netcdf.mod</code> Fortran 90 module file
is required, and it must be produced by the same compiler being
used to compile PartMC.</p></li>
<li><p>Unpack PartMC:</p>

<pre><code>tar xzvf partmc-1.2.0.tar.gz
</code></pre></li>
<li><p>Change into the main PartMC directory (where this README file is
located):</p>

<pre><code>cd partmc-1.2.0
</code></pre></li>
<li><p>Make a directory called <code>build</code> and change into it:</p>

<pre><code>mkdir build
cd build
</code></pre></li>
<li><p>Run cmake with the main PartMC directory as an argument (note the
double-c):</p>

<pre><code>ccmake ..
</code></pre></li>
<li><p>Inside ccmake press <code>c</code> to configure, edit the values as needed,
press <code>c</code> again, then <code>g</code> to generate.</p></li>
<li><p>Compile PartMC and test it as follows. Some tests may fail due to
bad random initial conditions, so re-run the tests a few times to
see if failures persist.</p>

<pre><code>make
make test
</code></pre></li>
<li><p>To run just a single test do something like:</p>

<pre><code>ctest -R poisson # argument is a regexp for test names
</code></pre></li>
<li><p>To see what make is doing run it like:</p>

<pre><code>VERBOSE=1 make
</code></pre></li>
<li><p>To run tests with visible output or to make some plots from the
tests run them as:</p>

<pre><code>cd run_test/emission
./run_test_1.sh                       # similary for other tests
gnuplot -persist plot_species.gnuplot # etc...
</code></pre></li>
<li><p>There is a complete scenario run under the <code>urban_plume/</code>
directory. From this directory do:</p>

<pre><code>./run.sh
./process.sh
gnuplot -persist plot_aero_species_wc.gnuplot
# similarly for other plots
</code></pre></li>
</ol>

<p>PartMC can interface to the MOSAIC chemistry code (see above for
availability) but this is not enabled by default. To use MOSAIC, set
the <code>ENABLE_MOSAIC</code> variable to <code>ON</code> in cmake. The
<code>MOSAIC_INCLUDE_DIR</code> variable should be the location of the MOSAIC
module files (compiled with the same compiler), probably ending in
<code>mosaic/datamodules</code>. The <code>MOSAIC_LIB</code> variable should end in
something like <code>mosaic/libmosaic.a</code>.</p>

<h1>Usage</h1>

<p>The main <code>partmc</code> command reads <code>.spec</code> files and does the run
specified therein. Either particle-resolved runs, sectional-code runs,
or exact solutions can be generated. A run produces one NetCDF file
per timestep, containing per-particle data (from particle-resolved
runs) or binned data (from sectional or exact runs). The <code>extract_*</code>
programs in the <code>tool/</code> directory can read these per-timestep NetCDF
files and output ASCII data (the <code>extract_sectional_*</code> programs are
used for sectional and exact model output).</p>

<h1>ChangeLog</h1>

<p>1.2.0 - 2009-06-14</p>

<ul>
<li><p>Output of full per-particle data in NetCDF format.</p></li>
<li><p><code>urban_plume</code> test-case added, as described in the paper
<a href="http://dx.doi.org/10.1029/2008JD011073">http://dx.doi.org/10.1029/2008JD011073</a>.</p></li>
<li><p>Build system switched to <code>cmake</code>.</p></li>
<li><p>Automated test suite added (<code>make test</code>).</p></li>
</ul>

<p>1.1.0 - 2008-02-17</p>

<ul>
<li><p>Internal reorganization to use Fortran 90 derived types for the
data structures.</p></li>
<li><p>Integration with the MOSAIC gas- and aerosol-chemistry code.</p></li>
<li><p>Output is in binary NetCDF format.</p></li>
<li><p>Parallel implementation using 1D mixing.</p></li>
</ul>

<p>1.0.0 - 2007-02-26</p>

<ul>
<li>First release, including hierarchical coagulation and full water
condensation.</li>
</ul>
</body></html>
